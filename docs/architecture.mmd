graph TB
    subgraph "Cliente"
        A[REST Client / Swagger UI]
    end

    subgraph "API FastAPI"
        B[Health Endpoint]
        C[Strategies CRUD]
        D[Backtest Endpoint]
    end

    subgraph "Motor de Trading"
        E[BacktestEngine]
        F[MomentumStrategy]
        G[MeanReversionStrategy]
        H[BreakoutStrategy]
    end

    subgraph "Dados"
        I[MarketDataService]
        J[(PostgreSQL)]
        K[Yahoo Finance API]
    end

    A --> B
    A --> C
    A --> D
    C --> J
    D --> E
    E --> F
    E --> G
    E --> H
    D --> I
    I --> K
    D --> J

    style A fill:#e1f5ff
    style E fill:#f0e1ff
    style J fill:#e1ffe1
